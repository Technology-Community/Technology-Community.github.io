var __=wp.i18n.__,el=wp.element.createElement,Fragment=wp.element.Fragment,InspectorControls=wp.editor.InspectorControls,BlockControls=wp.editor.BlockControls,PanelBody=wp.components.PanelBody,TextControl=wp.components.TextControl,RangeControl=wp.components.RangeControl,ToggleControl=wp.components.ToggleControl,SelectControl=wp.components.SelectControl,Toolbar=wp.components.Toolbar,IconButton=wp.components.IconButton,Popover=wp.components.Popover,ColorPalette=wp.components.ColorPalette,withSelect=
wp.data.withSelect,withState=wp.compose.withState,ifCondition=wp.compose.ifCondition,compose=wp.compose.compose,withInstanceId=wp.compose.withInstanceId,td_core_blocks_with_custom_spacing="core/image core/paragraph core/gallery core/spacer core/cover core/list core/heading core/quote core/pullquote core/video core/button core/columns core/media-text core/separator core/table core-embed/youtube core-embed/vimeo core-embed/facebook core-embed/instagram".split(" "),tagDivIcon=el("svg",{width:20,height:20,
className:"tdc-g-icons tdc-g-tagdiv"},el("path",{d:"M19,10.7a0.508,0.508,0,0,0,.239-0.412,0.544,0.544,0,0,0-.131-0.412l-5.92-5.395Q13.043,4.4,12.936,4.341a0.509,0.509,0,0,0-.251-0.06,0.769,0.769,0,0,0-.3.06,0.566,0.566,0,0,0-.215.143L10.036,6.418,7.9,4.484Q7.744,4.4,7.643,4.341a0.5,0.5,0,0,0-.257-0.06,0.443,0.443,0,0,0-.239.06,0.727,0.727,0,0,0-.167.143L1.073,9.879a0.487,0.487,0,0,0,0,.823l5.812,5.49q0.143,0.083.251,0.149a0.472,0.472,0,0,0,.251.066,0.71,0.71,0,0,0,.3-0.066A0.621,0.621,0,0,0,7.9,16.192l2.136-2.041,2.041,2.041q0.143,0.083.251,0.149a0.471,0.471,0,0,0,.251.066,0.71,0.71,0,0,0,.3-0.066,0.62,0.62,0,0,0,.215-0.149L19,10.7h0Zm-2.7-.412a0.314,0.314,0,0,1-.251.2l-3.27,3.055a0.082,0.082,0,0,1-.06.1,0.739,0.739,0,0,1-.143.012,0.248,0.248,0,0,1-.1-0.012,0.481,0.481,0,0,1-.1-0.1l-0.919-.8L14.106,10.3,12.578,8.864,7.494,13.543a0.082,0.082,0,0,1-.066.1,0.763,0.763,0,0,1-.137.012,0.3,0.3,0,0,1-.107-0.012,0.646,0.646,0,0,1-.107-0.1L3.83,10.488a0.216,0.216,0,0,1-.072-0.2,0.274,0.274,0,0,1,.167-0.209L7.183,7.026a0.075,0.075,0,0,1,.066-0.084,0.777,0.777,0,0,1,.137-0.012,0.753,0.753,0,0,1,.143.012,0.074,0.074,0,0,1,.06.084L8.6,7.743,5.859,10.3l1.635,1.42,5.084-4.69a0.075,0.075,0,0,1,.066-0.084,0.778,0.778,0,0,1,.137-0.012,0.3,0.3,0,0,1,.107.012A0.81,0.81,0,0,1,13,7.026l3.246,3.055A0.22,0.22,0,0,1,16.3,10.291Z"})),
textHighlightIcon=el("svg",{width:20,height:20,className:"tdc-g-icons tdc-g-highlight"},el("rect",{width:20,height:20}),el("path",{d:"M12.479,13.455H7.525l-1.3,3.555H4.007L8.729,3.991h2.407L16,17.01H13.775ZM9.933,5.884L8.173,11.655h3.8Z"})),btnSizeSmall=el("svg",{width:20,height:20,className:"tdc-g-icons tdc-g-btn-sm"},el("path",{d:"M9.653,14.546H6.35L5.486,17.007H4L7.153,7.994h1.6L12,17.007H10.517ZM7.955,9.3l-1.173,4H9.313ZM14,8h1v9H14V8ZM13,8h3V9H13V8Zm0,8h3v1H13V16Z"})),btnSizeMedium=el("svg",
{width:20,height:20,className:"tdc-g-icons tdc-g-btn-md"},el("path",{d:"M10.066,14H5.938l-1.08,3.008H3.006L6.941,5.993H8.947L13,17.008H11.146ZM7.944,7.594L6.478,12.477H9.641ZM15,6h1V17H15V6ZM14,6h3V7H14V6Zm0,10h3v1H14V16Z"})),btnSizeLarge=el("svg",{width:20,height:20,className:"tdc-g-icons tdc-g-btn-lg"},el("path",{d:"M10.479,13.455H5.525l-1.3,3.555H2.007L6.729,3.991H9.136L14,17.01H11.775ZM7.933,5.884L6.173,11.655h3.8ZM16,4h1V17H16V4ZM15,16h3v1H15V16ZM15,4h3V5H15V4Z"}));
function tdThemeControlsBlocksAttributes(c,b){"core/quote"===b&&(c.attributes=lodash.assign(c.attributes,{quoteStyle:{type:"string","default":""}}));"core/image"===b&&(c.attributes=lodash.assign(c.attributes,{tdVideoUrl:{type:"string","default":""},tdShowModal:{type:"boolean","default":!1},tdCaptionAlign:{type:"string","default":""},tdImgStyle:{type:"string","default":""},tdImgSrcUrl:{type:"string","default":""}}));"core/paragraph"===b&&(c.attributes=lodash.assign(c.attributes,{dropCapStyle:{type:"string",
"default":""}}));"core/list"===b&&(c.attributes=lodash.assign(c.attributes,{tdArrowListStyle:{type:"boolean","default":!1}}));"core/button"===b&&(c.attributes=lodash.assign(c.attributes,{tdButtonSize:{type:"string","default":""}}));td_core_blocks_with_custom_spacing.includes(b)&&(c.attributes=lodash.assign(c.attributes,{tdMaxWidth:{type:"number","default":void 0},tdMarginTop:{type:"number","default":void 0},tdMarginBottom:{type:"number","default":void 0}}));return c}
wp.hooks.addFilter("blocks.registerBlockType","td/core-blocks-attributes",tdThemeControlsBlocksAttributes);
var tdThemeBlocksControls=wp.compose.createHigherOrderComponent(function(c){return function(b){var a=b.name,d="core/image"===a,e="core/quote"===a,f="core/paragraph"===a,g="core/list"===a,h="core/button"===a;a=td_core_blocks_with_custom_spacing.includes(a);var k="undefined"!==typeof b.attributes.id,l=b.attributes.tdImgStyle,m=[{label:__("Default"),value:""},{label:__("Shadow"),value:"style-shadow"}],n=b.attributes.quoteStyle,p=[{label:__("Default"),value:"td_quote"},{label:__("Quote Left"),value:"td_quote td_quote_left"},
{label:__("Quote Right"),value:"td_quote td_quote_right"},{label:__("Quote Box Center"),value:"td_quote_box td_box_center"},{label:__("Quote Box Left"),value:"td_quote_box td_box_left"},{label:__("Quote Box Right"),value:"td_quote_box td_box_right"},{label:__("Pull Quote Center"),value:"td_pull_quote td_pull_center"},{label:__("Pull Quote Left"),value:"td_pull_quote td_pull_left"},{label:__("Pull Quote Right"),value:"td_pull_quote td_pull_right"}],q=b.attributes.quoteStyle,r=[{label:__("None"),value:""},
{label:__("Left"),value:"left"},{label:__("Center"),value:"center"},{label:__("Right"),value:"right"}],t=b.attributes.dropCapStyle,u=[{label:__("Box"),value:"dropcapp"},{label:__("Circle"),value:"dropcapp1"},{label:__("Regular"),value:"dropcapp2"},{label:__("Bold"),value:"dropcapp3"}],v=d||e||f;return el(Fragment,null,el(c,b),h&&el(BlockControls,null,el(withState({activeControl:b.attributes.tdButtonSize?b.attributes.tdButtonSize:"normal"})(function(a){var c=a.activeControl,d=a.setState;return el(Toolbar,
{className:"td-button-size-toolbar",controls:[{icon:btnSizeSmall,title:__("Small Button"),isActive:"small"===c,onClick:function(){return d(function(){b.setAttributes({tdButtonSize:"small"})})}},{icon:btnSizeMedium,title:__("Normal Button"),isActive:"normal"===c,onClick:function(){return d(function(){b.setAttributes({tdButtonSize:"normal"})})}},{icon:btnSizeLarge,title:__("Large Button"),isActive:"large"===c,onClick:function(){return d(function(){b.setAttributes({tdButtonSize:"large"})})}}]})}),null)),
el(InspectorControls,null,a&&el(PanelBody,{title:"Theme Settings",className:"components-panel__body td-components-panel__body",initialOpen:v,icon:tagDivIcon},d&&k&&el(withState({checked:b.attributes.tdShowModal})(function(a){var c=a.setState;return el(ToggleControl,{label:"LightBox",help:"Enable/Disable the Image LightBox",checked:b.attributes.tdShowModal,className:"none"!==b.attributes.linkDestination?"td-disabled-control":"",onChange:function(){return c(function(a){b.setAttributes({tdShowModal:!a.checked});
return{checked:!a.checked}})}})}),null),d&&k&&el(SelectControl,{label:"Image Caption Align",value:q,options:r,onChange:function(a){b.setAttributes({tdCaptionAlign:a})}}),d&&k&&el(SelectControl,{label:"Image Styles",value:l,options:m,onChange:function(a){b.setAttributes({tdImgStyle:a})}}),d&&k&&el(TextControl,{label:"Img Video Popup URL",help:"Add a video popup for this image.",type:"text",value:b.attributes.tdVideoUrl,onChange:function(a){b.setAttributes({tdVideoUrl:a})}}),e&&el(SelectControl,{label:"Quotes Styles",
value:n,options:p,onChange:function(a){b.setAttributes({quoteStyle:a})}}),f&&el(SelectControl,{label:"Drop Cap Style",value:t,options:u,onChange:function(a){b.setAttributes({dropCapStyle:a})}}),g&&el(withState({checked:b.attributes.tdArrowListStyle})(function(a){var c=a.setState;return el(ToggleControl,{label:"Arrowed List",help:"Toggle Arrowed List Format",checked:b.attributes.tdArrowListStyle,onChange:function(){return c(function(a){b.setAttributes({tdArrowListStyle:!a.checked});return{checked:!a.checked}})}})}),
null),el("hr",null),el(RangeControl,{label:"Custom Top Margin (px)",value:b.attributes.tdMarginTop,onChange:function(a){b.setAttributes({tdMarginTop:a})},min:-500,max:500}),el(RangeControl,{label:"Custom Bottom Margin (px)",value:b.attributes.tdMarginBottom,onChange:function(a){b.setAttributes({tdMarginBottom:a})},min:-500,max:500}),el(RangeControl,{label:"Custom Maximum Width (px)",value:b.attributes.tdMaxWidth,onChange:function(a){b.setAttributes({tdMaxWidth:a})},min:100,max:2E3}))))}},"tdThemeBlocksControls");
wp.hooks.addFilter("editor.BlockEdit","td/core-blocks-controls",tdThemeBlocksControls);function tdSetThemeFeaturesOnBlockSave(c,b,a){if("core/image"===b.name){if("undefined"!==typeof a.tdShowModal&&a.tdShowModal&&"none"===a.linkDestination)return el("div",null,el("a",{href:""!==a.tdImgSrcUrl?a.tdImgSrcUrl:a.url,className:"td-modal-image"},c));if("undefined"!==typeof a.tdVideoUrl&&""!==a.tdVideoUrl)return el("div",{"data-mfp-src":a.tdVideoUrl,className:"td-video-popup"},c)}return c}
wp.hooks.addFilter("blocks.getSaveElement","td/blocks-save",tdSetThemeFeaturesOnBlockSave);
var tdBlockWithCustomEditorWrapper=wp.compose.createHigherOrderComponent(function(c){return function(b){var a=b.name,d=b.attributes,e={};"core/image"===a&&(e.className=(""!==d.tdCaptionAlign?"td-caption-align-"+d.tdCaptionAlign:"")+" "+(""!==d.tdImgStyle?"td-img-"+d.tdImgStyle:""));"core/quote"===a&&(e.className=""!==d.quoteStyle?d.quoteStyle:"");"core/paragraph"===a&&(e.className=""!==d.dropCapStyle?d.dropCapStyle:"");"core/list"===a&&(e.className=d.tdArrowListStyle?"td-arrow-list":"");"core/button"===
a&&(e.className=""!==d.tdButtonSize?"td_btn_"+d.tdButtonSize:"");if(td_core_blocks_with_custom_spacing.includes(a)){a=b.wrapperProps;var f={};"undefined"!==typeof d.align&&"wide"===d.align?"undefined"!==typeof d.tdMaxWidth&&(f.maxWidth="none",f.width=d.tdMaxWidth+"px"):"undefined"!==typeof d.tdMaxWidth&&(f.maxWidth=d.tdMaxWidth+"px");"undefined"!==typeof d.tdMarginTop&&(f.marginTop=d.tdMarginTop+"px");"undefined"!==typeof d.tdMarginBottom&&(f.marginBottom=d.tdMarginBottom+"px");a=lodash.assign(a,
{style:f});e.wrapperProps=a}b=lodash.assign(b,e);return el(c,b)}});wp.hooks.addFilter("editor.BlockListBlock","td/blocks-with-custom-edit-wrapper",tdBlockWithCustomEditorWrapper);
function tdSetThemesBlockAttributes(c,b,a){var d=b.name;b="";var e={};if("core/image"===d){if("undefined"!==typeof a.id){var f=a.id;(f=f?wp.data.select("core").getMedia(f):null)&&f.source_url&&f.source_url!==a.url&&(a.tdCaptionAlign=f.source_url)}"undefined"!==typeof a.tdCaptionAlign&&""!==a.tdCaptionAlign&&(b=""===b?b+("td-caption-align-"+a.tdCaptionAlign):b+(" td-caption-align-"+a.tdCaptionAlign));"undefined"!==typeof a.tdImgStyle&&""!==a.tdImgStyle&&(b=""===b?b+("td-img-"+a.tdImgStyle):b+(" td-img-"+
a.tdImgStyle))}"core/quote"===d&&"undefined"!==typeof a.quoteStyle&&""!==a.quoteStyle&&(b=""===b?b+a.quoteStyle:b+(" "+a.quoteStyle));"core/paragraph"===d&&"undefined"!==typeof a.dropCapStyle&&""!==a.dropCapStyle&&(b=""===b?b+a.dropCapStyle:b+(" "+a.dropCapStyle));"core/list"===d&&"undefined"!==typeof a.tdArrowListStyle&&a.tdArrowListStyle&&(b=""===b?b+"td-arrow-list":b+" td-arrow-list");"core/button"===d&&"undefined"!==typeof a.tdButtonSize&&""!==a.tdButtonSize&&(b=""===b?b+("td_btn_"+a.tdButtonSize):
b+(" td_btn_"+a.tdButtonSize));td_core_blocks_with_custom_spacing.includes(d)&&("undefined"!==typeof a.align&&"wide"===a.align?"undefined"!==typeof a.tdMaxWidth&&(e.maxWidth="none",e.width=a.tdMaxWidth+"px"):"undefined"!==typeof a.tdMaxWidth&&(e.maxWidth=a.tdMaxWidth+"px"),"undefined"!==typeof a.tdMarginTop&&(e.marginTop=a.tdMarginTop+"px"),"undefined"!==typeof a.tdMarginBottom&&(e.marginBottom=a.tdMarginBottom+"px"));a={};lodash.isEmpty(e)||(a.style=e);""!==b&&(a.className="undefined"!==typeof c.className?
c.className+" "+b:b);return lodash.isEmpty(a)?c:lodash.assign(c,a)}wp.hooks.addFilter("blocks.getSaveContent.extraProps","td/blocks-save-attributes",tdSetThemesBlockAttributes);
wp.richText.registerFormatType("td/two-columns-text-format",{title:"TD Two Columns",tagName:"span",className:"td_text_columns_two_cols",edit:compose(withSelect(function(c){return{selectedBlock:c("core/editor").getSelectedBlock()}}),ifCondition(function(c){return c.selectedBlock&&"core/paragraph"===c.selectedBlock.name}))(function(c){return el(Fragment,null,el(BlockControls,null,el(Toolbar,{className:"td-components-toolbar"},el(IconButton,{className:"components-button components-icon-button components-td-toolbar-control components-toolbar__control components-td-columns-format"+
(c.isActive?" is-active":""),icon:"columns","aria-haspopup":"true",tooltip:__("Toggle Two Columns Text Format"),onClick:function(){console.log("clicked the Two Columns Text Format Toggle button");c.onChange(wp.richText.toggleFormat(c.value,{type:"td/two-columns-text-format"}))}}))))})});
wp.richText.registerFormatType("td/text-highlight-format",{title:"TD Text Highlight Color",tagName:"span",className:"td_text_highlight_marker",attributes:{style:"style"},edit:compose(withState({isOpen:!1}),withSelect(function(c){return{selectedBlock:c("core/editor").getSelectedBlock()}}),ifCondition(function(c){return c.selectedBlock&&"core/paragraph"===c.selectedBlock.name}),withInstanceId)(function(c){var b=[{name:__("Marker Default"),slug:"marker-default",color:"#fff9c0"},{name:__("Orange Sunrise"),
slug:"orange-sunrise",color:"#f7cc62"},{name:__("Pink Flamingo"),slug:"pink-flamingo",color:"#ffbfb5"},{name:__("Spring Green"),slug:"spring-green",color:"#b5dcaf"},{name:__("Blue Moon"),slug:"blue-moon",color:"#d6e8fa"},{name:__("Purple Mist"),slug:"purple-mist",color:"#d8c3ff"}],a=c.isOpen,d=c.value,e=c.isActive?" is-active":"",f=c.onChange,g=c.setState;c=wp.richText.getActiveFormat(d,"td/text-highlight-format");var h;c&&(c=c.attributes.style)&&(h=c.replace(/^background-color:\s*/,""));return el(Fragment,
null,el(BlockControls,null,el(Toolbar,{className:"td-components-toolbar"},el(IconButton,{className:"components-button components-icon-button components-td-toolbar-control components-toolbar__control components-td-background-format"+e,icon:textHighlightIcon,"aria-haspopup":"true",tooltip:__("Text Highlight Color"),onClick:function(){console.log("clicked the Text Highlight Color button");return g(function(a){return{isOpen:!a.isOpen}})}}),a&&el(Popover,{position:"bottom center",className:"components-td-text-highlight-color-popover",
focusOnMount:"container",onClickOutside:function(b){console.log("outside click");if(!b.target.classList.contains("components-td-background-format")&&!document.querySelector(".components-td-background-format").contains(b.target)&&(!document.querySelector(".components-color-palette__picker")||document.querySelector(".components-color-palette__picker")&&!document.querySelector(".components-color-palette__picker").contains(b.target)))return g(function(){return{isOpen:!a}})}},el(ColorPalette,{colors:b,
value:h,onChange:function(a){console.log(a);a?f(wp.richText.applyFormat(d,{type:"td/text-highlight-format",attributes:{style:"background-color:"+a}})):f(wp.richText.removeFormat(d,"td/text-highlight-format"))}})))))})});
wp.domReady(function(){wp.blocks.unregisterBlockStyle("core/button","outline");wp.blocks.unregisterBlockStyle("core/button","squared");wp.blocks.registerBlockStyle("core/button",{name:"round",label:"Round"});wp.blocks.registerBlockStyle("core/button",{name:"outline",label:"Outline"});wp.blocks.registerBlockStyle("core/button",{name:"shadow",label:"Shadow"});wp.blocks.registerBlockStyle("core/button",{name:"3d",label:"3D"})});
