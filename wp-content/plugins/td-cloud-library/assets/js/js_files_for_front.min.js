(function(){jQuery(document).ready(function(){jQuery("#wp-admin-bar-tdb_template_builder_disabled a").click(function(a){a.preventDefault();alert("Please select tagDiv Builder Template from the theme panel or set a default template. The current page/post uses a template that is not editable.")});jQuery("#wp-admin-bar-new-tdb_templates").hide()})})();var tdbMenu={};
(function(){tdbMenu={items:[],item:function(){this.blockUid="";this._outsideClickArea=this._mainMenu=this._itemsWithSubmenu=null;this._outsideClickExcludedAreas="";this._openMenuClass="tdb-hover";this._openMenuBodyClass="tdb-open-menu";this._is_initialized=this.isMegaMenuParentPos=this.isMegaMenuFull=this.inComposer=!1},init:function(){tdbMenu.items=[]},_initialize_item:function(a){if(!0!==a._is_initialized){tdbMenu._setHover(a);var b=0<jQuery("."+a.blockUid).parents(".td-header-template-wrap").length;
0<a.jqueryObj.find(".tdb-menu .tdb-mega-menu .sub-menu").length&&(window.tdb_globals.isAjax?b||(a.isMegaMenuFull&&tdbMenu.megaMenuFull(a,a.inComposer),a.isMegaMenuParentPos&&tdbMenu.megaMenuParentPos(a,a.inComposer)):(a.isMegaMenuFull&&tdbMenu.megaMenuFull(a,a.inComposer),a.isMegaMenuParentPos&&tdbMenu.megaMenuParentPos(a,a.inComposer)));a._is_initialized=!0}},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdbMenu.items.push(a);tdbMenu._initialize_item(a)},
deleteItem:function(a){for(var b=0;b<tdbMenu.items.length;b++)if(tdbMenu.items[b].blockUid===a)return tdbMenu.items.splice(b,1),!0;return!1},megaMenuFull:function(a,b){function e(){m=f.find(".tdb-menu .tdb-mega-menu .sub-menu");m.each(function(){c=-d.left+"px";jQuery(this).attr("style","left:"+c+"; width: "+jQuery("body").outerWidth()+"px !important")});k||(f.find(".tdb-mega-menu-inactive").removeClass("tdb-mega-menu-inactive"),k=!0)}var f=a.jqueryObj,d,g,c,m,k=!1;jQuery(window).resize(function(){setTimeout(function(){d=
f.offset();g=d.left;e();b&&setInterval(function(){d=f.offset();d.left!==g&&(e(),g=d.left)},1E3)},500)});jQuery(window).resize()},megaMenuParentPos:function(a,b){function e(){c=f.find(".tdb-menu .tdb-mega-menu ul");c.show();c.each(function(){jQuery(this).css("left","");m=jQuery(this).offset();k=m.left;0>k?jQuery(this).offset({left:0}):(h=jQuery(window).width()-(k+jQuery(this).outerWidth()),0>h&&jQuery(this).offset({left:jQuery(window).width()-jQuery(this).outerWidth()}))});l||(f.find(".tdb-mega-menu-inactive").removeClass("tdb-mega-menu-inactive"),
l=!0);c.hide()}var f=a.jqueryObj,d,g,c,m,k,h,l=!1;setTimeout(function(){jQuery(window).resize(function(){d=f.offset();g=d.left;e();b&&setInterval(function(){d=f.offset();d.left!==g&&(e(),g=d.left)},1E3)});jQuery(window).resize()},60)},_getSubmenuPosition:function(a){var b=jQuery(window).width();a=a.children(".sub-menu").first();if(0<a.length){var e=a.offset().left+a.width();e>b&&(a.parent().parent().hasClass("tdb-menu")?a.css("left","-"+(e-b)+"px"):a.addClass("reversed").css("left","-"+(a.width()+
0)+"px"))}},_getMouseAngleDirection:function(a,b,e,f){return Math.atan2(e-a,f-b)/Math.PI*180},_setHover:function(a){var b=a.jqueryObj.find(".tdb-menu");b.supersubs({minWidth:10,maxWidth:20,extraWidth:1,applyMin:!0});var e=b.find(".menu-item-has-children > a, .tdb-mega-menu > a");e.parent().find(".sub-menu").first().css("display","none");if(tdDetect.isTouchDevice)jQuery(document).on("touchstart","body",function(c){var b=e.parent(),d=jQuery("body");d.hasClass(a._openMenuBodyClass)&&!b.is(c.target)&&
0===b.has(c.target).length&&(b.removeClass(a._openMenuClass),b.children(".sub-menu").hide(),d.removeClass(a._openMenuBodyClass))}),e.on("touchstart",function(c){c.preventDefault();c.stopPropagation();var b=jQuery(this);c=b.parent();var d=jQuery("body");c.hasClass(a._openMenuClass)?null!==b.attr("href")&&"#"!==b.attr("href")?window.location.href=b.attr("href"):((c.parent().hasClass("tdb-menu")||c.parent().hasClass("top-header-menu"))&&d.removeClass(a._openMenuBodyClass),c.removeClass(a._openMenuClass),
c.find(".sub-menu").hide(),c.find("li").removeClass(a._openMenuClass)):(c.parent().hasClass("tdb-menu")||c.parent().hasClass("top-header-menu")?(e.parent().removeClass(a._openMenuClass),e.parent().children(".sub-menu").hide()):(b=c.siblings(),b.removeClass(a._openMenuClass),b.find(".sub-menu").hide(),b.find("li").removeClass(a._openMenuClass)),c.addClass(a._openMenuClass),c.children(".sub-menu").show(),tdbMenu._getSubmenuPosition(c),d.addClass(a._openMenuBodyClass))});else{var f={},d,g=!0;b.on("mouseleave",
function(){e.parent().removeClass(a._openMenuClass);e.parent().children(".sub-menu").hide();f={}});b.find(".menu-item").hover(function(){var c=jQuery(this),b="",k,h;if(c.hasClass("menu-item-has-children")||c.hasClass("tdb-mega-menu"))if(c.parent().hasClass("tdb-menu"))if(jQuery.isEmptyObject(f))c.addClass(a._openMenuClass),c.children(".sub-menu").show(),f=c;else{if(c[0]!==f[0]){var l=h=k=0;var n=null;!0===g&&(g=!1,d=setTimeout(function(){e.parent().removeClass(a._openMenuClass);e.parent().children(".sub-menu").hide();
c.addClass(a._openMenuClass);c.children(".sub-menu").show();f=c},400));c.on("mousemove",function(b){5<=k?(k=0,n=tdbMenu._getMouseAngleDirection(h,l,b.pageX,b.pageY),h=b.pageX,l=b.pageY):(k++,0===h&&0===l&&(h=b.pageX,l=b.pageY));null!==n&&(85<n||-85>n)&&(e.parent().removeClass(a._openMenuClass),e.parent().children(".sub-menu").hide(),c.addClass(a._openMenuClass),c.children(".sub-menu").show(),c.off("mousemove"),clearTimeout(d),g=!0,f=c)})}}else b=c.siblings(),b.removeClass(a._openMenuClass),b.find(".sub-menu").hide(),
b.find("li").removeClass(a._openMenuClass),c.addClass(a._openMenuClass),c.children(".sub-menu").show(),tdbMenu._getSubmenuPosition(c);else c.parent().hasClass("tdb-menu")?jQuery.isEmptyObject(f)||(l=h=k=0,n=null,!0===g&&(g=!1,d=setTimeout(function(){e.parent().removeClass(a._openMenuClass);e.parent().children(".sub-menu").hide();f={}},400)),c.on("mousemove",function(b){5<=k?(k=0,n=tdbMenu._getMouseAngleDirection(h,l,b.pageX,b.pageY),h=b.pageX,l=b.pageY):(k++,0===h&&0===l&&(h=b.pageX,l=b.pageY));null!==
n&&(85<n||-85>n)&&(e.parent().removeClass(a._openMenuClass),e.parent().children(".sub-menu").hide(),c.off("mousemove"),clearTimeout(d),g=!0,f={})})):(f=c.parent(),b=c.siblings(),b.removeClass(a._openMenuClass),b.find(".sub-menu").hide(),b.find("li").removeClass(a._openMenuClass))},function(){var a=jQuery(this);!1===g&&(clearTimeout(d),g=!0);a.off("mousemove")})}},unsetHover:function(a){null!==a._itemsWithSubmenu&&a._itemsWithSubmenu.off();null!==a._outsideClickArea&&a._outsideClickArea.off()}}})();
var tdbMenuItemPullDown={};
(function(){tdbMenuItemPullDown={init:function(){setTimeout(function(){jQuery(".tdb-menu-items-pulldown").each(function(a,b){var e=jQuery(b),f=e.parent().attr("id"),d=jQuery("."+f),g="";"none"!==d.css("max-width")&&(g=d.css("max-width"));if(d.hasClass("tdb-menu-items-in-more")){var c=e.find(".tdb-menu:first"),m=c.parents(".tdb-menu-items-pulldown:first"),k=[],h=new tdPullDown.item;if(void 0!==d.css("display")&&"inline-block"===d.css("display")){var l=d.closest(".vc_column_container");m=l;d="";d=0!==
l.find(".tdc-elements").length?".tdc-elements":".wpb_wrapper";l.find(d+" > .td_block_wrap").each(function(){var a=.9*l.outerWidth(!0),b=jQuery(this).outerWidth(!0);if(jQuery(this).data("td-block-uid")!==f)if(b<a)k.push(jQuery(this));else return!1})}h.blockUid=f;h.horizontal_jquery_obj=c;h.vertical_jquery_obj=e.find(".tdb-menu-items-dropdown:first");h.horizontal_element_css_class="tdb-menu-item-button";h.horizontal_no_items_css_class="tdb-menu-items-empty";h.container_jquery_obj=m;h.horizontal_max_width=
g;h.excluded_jquery_elements=k;tdPullDown.add_item(h)}c.parents(".tdb-menu-items-pulldown:first").hasClass("tdb-menu-items-pulldown-inactive")&&c.parents(".tdb-menu-items-pulldown:first").removeClass("tdb-menu-items-pulldown-inactive")})},50)}}})();jQuery().ready(function(){tdbMenu.init()});jQuery(window).load(function(){tdbMenuItemPullDown.init()});var tdbSearch={};
(function(){tdbSearch={items:[],init:function(){tdbSearch.items=[]},item:function(){this.jqueryObj=this.blockAtts=this.blockUid=void 0;this._is_search_open=!1;this._last_request_results_count=this._current_selection_index=0;this._first_down_up=!0;this._resultsLimit=void 0;this._openSearchFormClass="";this._is_initialized=this.isSearchFormFull=this.inComposer=!1},_initialize_item:function(a){if(!0!==a._is_initialized){jQuery(document).on("click",function(b){jQuery("."+a.blockUid+" .tdb-head-search-form-input").get(0)!==
b.target&&!0===a._is_search_open&&tdbSearch.hide_search_box(a)});a.jqueryObj.find(".tdb-head-search-btn").on("click",function(b){b.preventDefault();b.stopPropagation();!0===a._is_search_open?tdbSearch.hide_search_box(a):tdbSearch.show_search_box(a)});a.jqueryObj.find(".tdb-head-search-form-input").keydown(function(b){if(b.which&&39===b.which||b.keyCode&&39===b.keyCode||b.which&&37===b.which||b.keyCode&&37===b.keyCode)tdbSearch.set_input_focus(a);else{if(b.which&&13===b.which||b.keyCode&&13===b.keyCode)return b=
a.jqueryObj.find(".tdb-aj-cur-element"),0<b.length?window.location=b.find(".entry-title a").attr("href"):jQuery(this).parent().parent().submit(),!1;if(b.which&&40===b.which||b.keyCode&&40===b.keyCode)return tdbSearch.move_prompt_down(a),!1;if(b.which&&38===b.which||b.keyCode&&38===b.keyCode)return tdbSearch.move_prompt_up(a),!1;(b.which&&8===b.which||b.keyCode&&8===b.keyCode)&&1===jQuery(this).val().length&&a.jqueryObj.find(".tdb-aj-search").empty();tdbSearch.set_input_focus(a);setTimeout(function(){tdbSearch.do_ajax_call(a)},
100);return!0}});var b=0<jQuery("."+a.blockUid).parents(".td-header-template-wrap").length;window.tdb_globals.isAjax?b||(a.isSearchFormFull?tdbSearch.searchFormWidth(a,!0,a.inComposer):tdbSearch.searchFormWidth(a,!1,a.inComposer)):a.isSearchFormFull?tdbSearch.searchFormWidth(a,!0,a.inComposer):tdbSearch.searchFormWidth(a,!1,a.inComposer);a._is_initialized=!0}},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdbSearch.items.push(a);tdbSearch._initialize_item(a)},
deleteItem:function(a){for(var b=0;b<tdbSearch.items.length;b++)if(tdbSearch.items[b].blockUid===a)return tdbSearch.items.splice(b,1),!0;return!1},searchFormWidth:function(a,b,e){function f(){m=-g.left+"px";k.attr("style",k.attr("style")+";left:"+m)}var d=a.jqueryObj,g,c,m,k=d.find(".tdb-drop-down-search");jQuery(window).resize(function(){k.attr("style","width: "+jQuery("body").outerWidth()+"px !important");b&&setTimeout(function(){g=d.offset();c=g.left;f();e&&setInterval(function(){g=d.offset();
g.left!==c&&(f(),c=g.left)},1E3)},500)});jQuery(window).resize()},show_search_box:function(a){a.jqueryObj.find(".tdb-drop-down-search").addClass(a._openSearchFormClass);!0!==tdDetect.isIos&&setTimeout(function(){document.querySelector("."+a.blockUid+" .tdb-head-search-form-input").focus()},200);a._is_search_open=!0},hide_search_box:function(a){a.jqueryObj.find(".tdb-drop-down-search").removeClass(a._openSearchFormClass);a._is_search_open=!1},move_prompt_up:function(a){!0===a._first_down_up?(a._first_down_up=
!1,0===a._current_selection_index?a._current_selection_index=a._last_request_results_count-1:a._current_selection_index--):0===a._current_selection_index?a._current_selection_index=a._last_request_results_count:a._current_selection_index--;tdbSearch._repaintCurrentElement(a)},move_prompt_down:function(a){!0===a._first_down_up?a._first_down_up=!1:a._current_selection_index===a._last_request_results_count?a._current_selection_index=0:a._current_selection_index++;tdbSearch._repaintCurrentElement(a)},
set_input_focus:function(a){a._current_selection_index=0;a._first_down_up=!0;a.jqueryObj.find(".tdb-search-form").fadeTo(100,1);a.jqueryObj.find(".td_module_wrap").removeClass("tdb-aj-cur-element")},remove_input_focus:function(a){0!==a._last_request_results_count&&a.jqueryObj.find(".tdb-head-search-form-input").addClass("tdb-head-search-nofocus")},_repaintCurrentElement:function(a){a.jqueryObj.find(".td_module_wrap").removeClass("tdb-aj-cur-element");a._current_selection_index>a._last_request_results_count-
1?(a.jqueryObj.find(".tdb-search-form").fadeTo(100,1),a.jqueryObj.find(".tdb-head-search-form-input").removeClass("tdb-head-search-nofocus")):(tdbSearch.remove_input_focus(a),a.jqueryObj.find(".td_module_wrap").eq(a._current_selection_index).addClass("tdb-aj-cur-element"))},do_ajax_call:function(a){var b=a.jqueryObj.find(".tdb-head-search-form-input").val();""===b?tdbSearch.set_input_focus(a):tdLocalCache.exist("tdb-"+b)?tdbSearch.process_ajax_response(tdLocalCache.get("tdb-"+b),a):jQuery.ajax({type:"POST",
url:td_ajax_url,data:{action:"td_ajax_search",module:"tdb_module_search",atts:a.blockAtts,td_string:b,limit:a._resultsLimit},success:function(e,f,d){tdLocalCache.set("tdb-"+b,e);tdbSearch.process_ajax_response(e,a)},error:function(a,b,d){window.console.log(d)}})},process_ajax_response:function(a,b){var e=b.jqueryObj.find(".tdb-head-search-form-input").val(),f=b.jqueryObj.find(".tdb-aj-search");if(""===e)f.empty();else{var d=jQuery.parseJSON(a);d.td_search_query===e&&(b._current_selection_index=0,
b._last_request_results_count=d.td_total_in_list,b._first_down_up=!0,f.html(d.td_data),"undefined"!==typeof window.tdAnimationStack&&!0===window.tdAnimationStack.activated&&(window.tdAnimationStack.check_for_new_items(".tdb-aj-search .td-animation-stack",window.tdAnimationStack.SORTED_METHOD.sort_left_to_right,!0,!1),window.tdAnimationStack.compute_items(!1)))}},hideAllItems:function(){tdbSearch.items.forEach(function(a){tdbSearch.hide_search_box(a)})}}})();jQuery().ready(function(){tdbSearch.init()});
